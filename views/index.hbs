<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>TESTING</title>
    <link rel="stylesheet" href="static/css/auto-complete.css">
  </head>
  <body>
    <h1>AutoComplete</h1>
    <form id="search_form" action="/search" method="GET">
      <input id="search" type="text" name="search">
    </form>
    <script src="static/js/auto-complete.min.js"></script>
    <script src="static/js/axios.min.js"></script>
    <script>
      // initialize

      //auto complete function
      var autoComplete = new autoComplete({
        selector: '#search',
        //autocomplete works after 2 characters are typed
        minChars: 2,
        source: function(term, suggest){
          term = term.toLowerCase();
          var config = {
            params: {selection: term},
          }
          //sends the get request with input to the backend
          var temp;
          axios.get('/autocomplete/', config)
            .then(function(result){
              temp = result.data.suggestions;
              console.log(temp);
              suggest(temp);
            })
            .catch(function(error) {
              console.error(error);
            });
        }
        onSelect: function(e, term, item){
          var input = document.getElementById("search");
          input.value = item;
          document.getElementById("search_form").submit();
        }
      });

    </script>

  </body>
</html>
