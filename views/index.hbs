<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food for My Mood</title>

    <!------------------ STYLES ------------------>
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/css/materialize.min.css">
    <link rel="stylesheet" href="static/css/main.css">
    <link rel="stylesheet" href="static/css/auto-complete.css">
  </head>
  <body>
    <div class="container">

      <div class="input-field col s10">
        <input id="search" type="text" name="search">
        <label for="search" data-error="wrong" data-success="right">I'm in the mood for . . .</label>
      </div>

      <div class="center-align">
        <a class="waves-effect waves-light btn orange">I don't know! Help me decide.</a>
      </div>

    </div><!-- .container -->

    <!------------------- SCRIPTS ------------------->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/js/materialize.min.js"></script>
    <script src="static/js/axios.min.js"></script>
    <script src="static/js/auto-complete.min.js"></script>
    <script>
      // initialize

      //auto complete function
      var autoComplete = new autoComplete({
                  selector: '#search',
                  //autocomplete works after 2 characters are typed
                  minChars: 2,

                  source: function(term, suggest){
                      term = term.toLowerCase();
                      //var choices = ['ActionScript', 'AppleScript', 'Asp', 'Assembly', 'BASIC', 'Batch', 'C', 'C++', 'CSS', 'Clojure', 'COBOL', 'ColdFusion', 'Erlang', 'Fortran', 'Groovy', 'Haskell', 'HTML', 'Java', 'JavaScript', 'Lisp', 'Perl', 'PHP', 'PowerShell', 'Python', 'Ruby', 'Scala', 'Scheme', 'SQL', 'TeX', 'XML'];
                      //creates the search input term from the user
                      var config = {
                        params: {selection: term},
                      }
                      //sends the get request with input to the backend
                      var temp;
                      axios.get('/autocomplete/', config)
                        .then(function(result){
                          temp = result.data.suggestions;
                          console.log(temp);
                          suggest(temp);
                        })
                        .catch(function(error) {
                          console.error(error);
                        });

                  }
              });

    </script>

  </body>
</html>
